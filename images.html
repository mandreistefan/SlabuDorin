<!DOCTYPE html>
<head>
  <title>Numesite</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="images.css">
  <link rel="stylesheet" href="navigation_lite.css">
</head>

<html lang="ro">
	<body onload="load_images(0,10)">
		<div class="navigation">
		<a href="./home.html" style="text-decoration:none">
			<div id="logo_image_container">
				<img id="jumbotron_logo" src="./_img/logo.png" alt="Produse_img">
				<div style="">
					<span id="logo_container_header">Dorin Slabu</span><br>
					<span style="color:gray">Renovari interioare-exterioare</span>
				</div>
			</div>	
		</a>
		</div>
		<div id="container_custom">
			<div class="galerie" id="galerie">

			</div>
			<div id="load_more_container">
				<button type="button" id="load_more" class="btn btn-dark">+</button>	
			</div>
		</div>
	</body>	
</html>

<script>
	function load_images(from,to){
		var xhttp = new XMLHttpRequest();
		xhttp.open("GET", "./_images/_registru.xml", true);
		xhttp.send();
		xhttp.onreadystatechange = function() {
			if (xhttp.readyState == 4 && xhttp.status == 200) {
				var xmlDoc = xhttp.responseXML;
				var images = xmlDoc.getElementsByTagName("imagine");
				var container=document.getElementById("galerie");
				var div, thumbnail, imagine, titlu, descriere;
				//var image_step=8;
					if(to>parseInt(images.length)){
						to=parseInt(images.length);
						$("#load_more").prop('disabled', true);
					}
					for(var i=from;i<to;i++){
						  div = document.createElement('div');
						  div.className="custom_image_container";

						  thumbnail=document.createElement('div');
						  thumbnail.className="custom-thumbnail";
						  div.appendChild(thumbnail);
						  
						  link=document.createElement('A');
						  link.setAttribute('href', "./_images/_"+i+".jpg");
						  link.setAttribute('target', "_blank");
						  link.className="image_link";
						  thumbnail.appendChild(link);
						  
						  imagine = document.createElement("IMG");
						  imagine.className="custom_image";
						  imagine.setAttribute("src", "./_images/_"+i+".jpg");
						  
						  link.appendChild(imagine);
					  
						  titlu = document.createElement("h4");
						  titlu.innerText = images[i].getElementsByTagName("titlu")[0].childNodes[0].nodeValue;
						 						  
						  descriere = document.createElement("p");
						  descriere.innerText = images[i].getElementsByTagName("descriere")[0].childNodes[0].nodeValue;
						  
						  spanul = document.createElement("span");
						  spanul.className="short_descr";
						  spanul.appendChild(titlu);
						  spanul.appendChild(descriere);
						  
						  div.appendChild(spanul);
						  
						  document.getElementById("galerie").appendChild(div);
					}	
					setTimeout(function(){
						$(".short_descr").css("opacity","1");
						}, 500);
						$("#load_more_container").css("opacity","1");
			}else if(xhttp.status == 404){
				div = document.createElement('div');
				div.innerHTML="Ceva nu e ok aici:(";
				document.getElementById('container_custom').appendChild(div);
			}
		};
	}
	
	$("#load_more").click(function(){
		var from=$('.custom_image_container').length;
		var to=from+10;
			load_images(from,to);
	});

	
</script>

